!function(e){'use strict';e.KTP={},e.videofarm={};var d={},t={on:document.addEventListener?function(e,t,n){if(!e)throw new Error('failed to add event. Element: "'+e+'", Event: "'+t+'", handler: '+n.toString());e.addEventListener(t,n,!1)}:function(e,t,n){e.attachEvent('on'+t,n)},off:document.removeEventListener?function(e,t,n){e.removeEventListener(t,n,!1)}:function(e,t,n){e.detachEvent('on'+t,n)}};function p(e){e&&e.style&&(e.style.width='100%',e.style.height='100%',e.style.position='')}function a(e,t,n){e.postMessage(JSON.stringify(n),t)}function m(e,t,n){var o,i;this.iframe=e,this.style=e.style,this.config=t,this.callbacks=n,this.isInited=!1,this.originHost=(o=e.src,i=new RegExp('^(http(?:s)?://[^/]+)','im'),o.match(i)[1].toString().toLowerCase()),this.isFlashPlayer=!1}m.prototype={sendCommand:function(e){var t=this.config.id||'',n=this.iframe.contentWindow,o=this.originHost,i=Array.prototype.slice.call(arguments,1)[0],s={action:e,id:t||'',args:Array.isArray(i)?i:[i]};try{this.checkReady()&&a(n,o,s)}catch(e){this.callbacks&&'function'==typeof this.callbacks.notReadyCallback&&this.callbacks.notReadyCallback()}},runActionTask:function(e,t){'onReadyComplete'===e&&(this.isFlashPlayer=t[3],function(e){e.isInited=!0;var t=e.iframe,n=e.callbacks,o=e.config;e.isFlashPlayer&&p(t),e.setCallback(n),n&&n.canUseApi&&n.canUseApi(),o&&o.beaconData&&e.setBeaconData(o.beaconData)}(this)),'onAlreadyInited'===e&&(this.isInited=!0)},onMessage:function(e){var t;if(e.origin.toLowerCase()===this.originHost){try{t=JSON.parse(e.data)}catch(e){return}var n=t.action,o=t.args||[];this.runActionTask(n,o),this.callbacks&&'function'==typeof this.callbacks[n]&&this.callbacks[n].apply(this.callbacks,o)}},checkReady:function(){return this.isInited||this.callbacks&&'function'==typeof this.callbacks.notReadyCallback&&this.callbacks.notReadyCallback(),this.isInited},checkInited:function(){var e=this.iframe.contentWindow,t=this.originHost;try{a(e,t,{action:'checkInited'})}catch(e){this.callbacks&&'function'==typeof this.callbacks.notReadyCallback&&this.callbacks.notReadyCallback()}},play:function(e){0===this.config.showcover&&p(this.iframe),this.sendCommand('play',[e])},pause:function(){this.sendCommand('pause')},stop:function(){this.sendCommand('stop')},load:function(e,t,n){this.sendCommand('load',[e,t,n])},loadAndPlay:function(e,t,n){this.sendCommand('loadAndPlay',[e,t,n])},mute:function(){this.sendCommand('mute')},unMute:function(){this.sendCommand('unMute')},setVolume:function(e){this.sendCommand('setVolume',[e])},seekTo:function(e){this.sendCommand('seekTo',[e])},increaseUpCnt:function(){this.sendCommand('increaseUpCnt')},setListPlayMode:function(e){this.sendCommand('setListPlayMode',[e])},setRepeatMode:function(e){this.sendCommand('setRepeatMode',[e])},setVerticalMode:function(){this.sendCommand('setVerticalMode')},setAutoplayVisible:function(){this.sendCommand('setAutoplayVisible')},setContinuousPlay:function(){this.sendCommand('setContinuousPlay')},setPlaybackRate:function(){this.sendCommand('setPlaybackRate')},unsetVerticalMode:function(){this.sendCommand('unsetVerticalMode')},popupUrl:function(e){this.sendCommand('popupUrl',[e])},changeScreenType:function(e){this.sendCommand('changeScreenType',[e])},fireEvent:function(e){this.sendCommand('fireEvent',[e])},setCallback:function(e){this.callbacks=e},setBeaconData:function(e){this.sendCommand('setBeaconData',[e])},requestFullScreen:function(){this.sendCommand('requestFullScreen')},cancelFullScreen:function(){this.sendCommand('cancelFullScreen')},destroy:function(){void 0!==d[this.config.id]&&(this.iframe.parentNode.removeChild(this.iframe),delete d[this.config.id])}};var y,c=(y='/embed/player/',{create:function(e,t,n){if(t.id&&''!==t.id){var o,i=document.createElement('iframe');t&&0===t.showcover?(o=i)&&o.style&&(o.style.width='1px',o.style.height='1px',o.style.position='absolute',o.style.zIndex=''):p(i),i.style.border='0';var s,a,r,c=t.service||'und_player',l=(r='',(s=c)&&(r+='?service='+s),(a=t)&&(a.section&&(r+='&section='+a.section),'number'==typeof a.autoplay&&1===a.autoplay&&(r+='&autoplay='+a.autoplay),'number'==typeof a.mute&&1===a.mute&&(r+='&mute='+a.mute),'number'==typeof a.fs&&0===a.fs&&(r+='&fs='+a.fs),'number'==typeof a.playsinline&&0===a.playsinline&&(r+='&playsinline='+a.playsinline),a.profile&&(r+='&profile='+a.profile),a.forceprofile&&(r+='&forceprofile='+a.forceprofile),'number'==typeof a.extensions&&0===a.extensions&&(r+='&extensions='+a.extensions),'number'==typeof a.showcover&&0===a.showcover&&(r+='&showcover='+a.showcover),'number'==typeof a.coverprofile&&0===a.coverprofile&&(r+='&coverprofile='+a.coverprofile),'number'==typeof a.covertime&&0===a.covertime&&(r+='&covertime='+a.covertime),'number'==typeof a.showprofile&&0===a.showprofile&&(r+='&showprofile='+a.showprofile),'number'==typeof a.miniprogress&&1===a.miniprogress&&(r+='&miniprogress='+a.miniprogress),'number'==typeof a.showinfo&&0===a.showinfo&&(r+='&showinfo='+a.showinfo),'number'==typeof a.controls&&0===a.controls&&(r+='&controls='+a.controls),'number'==typeof a.rel&&0===a.rel&&(r+='&rel='+a.rel),'number'==typeof a.branding&&0===a.branding&&(r+='&branding='+a.branding),a.isLauncher&&(r+='&m_is_launcher=true'),a.start&&0<a.start&&(r+='&start='+a.start),a.coverurl&&(r+='&coverurl='+a.coverurl),a.internalParam&&(r+='&'+a.internalParam),'number'==typeof a.applink&&0===a.applink&&(r+='&applink='+a.applink),'number'==typeof a.showconfirm&&0===a.showconfirm&&(r+='&showconfirm='+a.showconfirm),'number'==typeof a.showhdconfirm&&0===a.showhdconfirm&&(r+='&showhdconfirm='+a.showhdconfirm),'number'==typeof a.dash&&0===a.dash&&(r+='&dash='+a.dash),'number'==typeof a.showprogress&&0===a.showprogress&&(r+='&showprogress='+a.showprogress),'number'==typeof a.showmute&&0===a.showmute&&(r+='&showmute='+a.showmute),'number'==typeof a.showplayback&&0===a.showplayback&&(r+='&showplayback='+a.showplayback),'number'==typeof a.showliveicon&&0===a.showliveicon&&(r+='&showliveicon='+a.showliveicon),'number'==typeof a.showviewer&&0===a.showviewer&&(r+='&showviewer='+a.showviewer)),r),u=y,f='play-tv.kakao.com';if(t)if(t&&0===t.kakaotv&&(f='kakaotv.daum.net'),t.host&&(f=t.host),t.local||(t.host||(f=location.protocol+'//'+f),u=f+y),'VOD'===t.type)u=u+'cliplink/'+t.id;else{if('LIVE'!==t.type)return void alert('플레이어 type이 설정되지 않았습니다.');u+='livelink',l+='&liveLinkId='+t.id}i.src=u+l,i.setAttribute('allow','autoplay, fullscreen'),i.setAttribute('allowfullscreen',''),e&&e.appendChild(i);var h=new m(i,t,n);return t&&t.id&&(d[t.id]=h),this.id=t.id,h}alert('영상의 id값이 설정되지 않았습니다.')},createWithIframe:function(e,t,n){e.setAttribute('allow','autoplay, fullscreen'),e.setAttribute('allowfullscreen','');var o=new m(e,{id:t},n);return t&&(d[t]=o),this.id=t,o},pauseAll:function(){for(var e in d)if(d.hasOwnProperty(e)){var t=d[e];t.isInited&&t.pause()}},pauseAllExcluding:function(e){for(var t in d)if(d.hasOwnProperty(t)){var n=d[t];if('string'==typeof e&&e===t||e===n)continue;n.isInited&&n.pause()}}});var n={create:function(e,t,n,o){var i,s,a,r=(s=n,a={},(i=t)&&(a.service=i,a.section=i),s&&('boolean'==typeof s.autoplay&&(a.autoplay=s.autoplay?1:0),'boolean'==typeof s.coverVisibility&&(a.showcover=s.coverVisibility?1:0),'boolean'==typeof s.fs&&(a.fs=s.fs?1:0),s.vid&&(a.id=s.vid+'@my'),s.startDuration&&(a.start=s.startDuration),s.host&&(a.host=s.host),s.internalParam&&(a.internalParam=s.internalParam),a.type='VOD'),a);return c.create(e,r,o)},createWithIframe:function(e,t,n){var o=t+'@my';return c.createWithIframe(e,o,n)},pauseAll:function(){c.pauseAll()},pauseAllExcluding:function(e){c.pauseAll(e)}};t.on(window,'message',function(e){var t,n;for(t in d)d.hasOwnProperty(t)&&d[t]&&(n=d[t]).iframe.contentWindow===e.source&&n.onMessage(e)}),e.KTP.Player=c,e.videofarm.VodPlayer=n}(window);